<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>4 Digit Realtime Guessing Game</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="/static/main.js" defer></script>
</head>
<body>
  <div class="app-header">
    <h1>4 Digit Realtime Guessing Game</h1>
    <span class="app-subtitle">Multiplayer • WebSocket • 100s rounds</span>
  </div>

  <main class="container">
    <!-- Welcome Screen -->
    <section id="screen-welcome" class="screen active">
      <div class="card">
        <h2>Lobiye Gir</h2>
        <div class="form-group">
          <label for="input-name">Kullanıcı adın</label>
          <input id="input-name" type="text" maxlength="20" placeholder="Örn: Ali" />
        </div>

        <div class="form-row">
          <button id="btn-create-lobby">Yeni Lobi Kur</button>
        </div>

        <div class="divider">veya</div>

        <div class="form-row">
          <div class="form-group">
            <label for="input-lobby-id">Lobi ID</label>
            <input id="input-lobby-id" type="text" maxlength="6" placeholder="Örn: ABC123" />
          </div>
          <button id="btn-join-lobby">Lobiye Katıl</button>
        </div>

        <p id="welcome-error" class="error-text"></p>
      </div>
    </section>

    <!-- Lobby / Game Screen -->
    <section id="screen-lobby" class="screen">
      <div class="layout">
        <!-- Left: Lobby & Game Info -->
        <div class="column column-main">
          <div class="card">
            <div class="lobby-header">
              <div>
                <div class="label">Lobi ID</div>
                <div id="lbl-lobby-id" class="value"></div>
              </div>
              <div>
                <div class="label">Durum</div>
                <div id="lbl-status" class="value"></div>
              </div>
              <div>
                <div class="label">Tur</div>
                <div id="lbl-round" class="value"></div>
              </div>
              <div>
                <div class="label">Kalan Süre</div>
                <div id="lbl-timer" class="value"></div>
              </div>
            </div>

            <div class="controls">
              <button id="btn-start-game" class="secondary-button">Oyunu Başlat (Owner)</button>
              <button id="btn-show-leaderboard" class="secondary-button">Global Skor</button>
            </div>

            <div id="you-info" class="you-info"></div>

            <div class="guess-panel">
              <label for="input-guess">4 haneli tahminin</label>
              <div class="form-row">
                <input
                  id="input-guess"
                  type="text"
                  maxlength="4"
                  placeholder="----"
                  inputmode="numeric"
                />
                <button id="btn-submit-guess">Tahmin Gönder</button>
              </div>
              <p id="guess-help" class="help-text">
                Oyun başladıktan sonra her turda 1 tahmin yapabilirsin. Hiç rakam tutmazsa bonus puan!
              </p>
              <p id="guess-error" class="error-text"></p>
              <div id="guess-result" class="guess-result"></div>
            </div>
          </div>

          <div class="card">
            <h3>Oyun Logu</h3>
            <div id="log" class="log"></div>
          </div>
        </div>

        <!-- Right: Players -->
        <div class="column column-side">
          <div class="card">
            <h3>Lobi Oyuncuları</h3>
            <table class="table">
              <thead>
                <tr>
                  <th>Oyuncu</th>
                  <th>Rol</th>
                  <th>Puan</th>
                  <th>Durum</th>
                </tr>
              </thead>
              <tbody id="players-table-body"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Global Leaderboard Modal -->
  <div id="leaderboard-modal" class="modal-backdrop hidden">
    <div class="modal">
      <div class="modal-header">
        <h2>Global Skor Tablosu</h2>
        <button id="btn-close-leaderboard" class="close-button">✕</button>
      </div>
      <div class="modal-body">
        <h3>İlk 3</h3>
        <table class="table">
          <thead>
            <tr>
              <th>Sıra</th>
              <th>Oyuncu</th>
              <th>Skor</th>
            </tr>
          </thead>
          <tbody id="leaderboard-top"></tbody>
        </table>

        <h3>Sen</h3>
        <div id="leaderboard-me" class="leader-me"></div>
      </div>
    </div>
  </div>
</body>
</html>
